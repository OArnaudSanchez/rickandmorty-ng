@let localEpisode = episode();

@if(localEpisode && localEpisode !== undefined){
  <app-container title="Episode Detail">
   <div class="flex flex-col items-center justify-center px-4 py-8 sm:py-12 lg:px-8">
      <!-- TODO: Refactor and separate components -->
      <div
        class="w-full max-w-4xl bg-white border border-gray-200 rounded-2xl shadow-md dark:bg-gray-800 dark:border-gray-700 overflow-hidden">
        <div
          class="flex flex-col md:flex-row items-center md:items-start gap-6 p-6">
          <div class="flex-1">
            <h1
              class="text-3xl font-bold text-gray-900 dark:text-white mb-2"
            >
              {{ episodeName }}
            </h1>
  
            <p class="mt-4 text-gray-700 dark:text-gray-300">
              <span class="font-semibold">Air Date:</span>
              {{ localEpisode.airDate | date }}
            </p>
  
            <p class="mt-1 text-gray-700 dark:text-gray-300">
              <span class="font-semibold">Episode Number:</span>
              {{ localEpisode.episode }}
            </p>
  
            <p class="mt-1 text-gray-700 dark:text-gray-300">
              <span class="font-semibold">Url: </span>
              <!-- Add svg or icon -->
              <a [href]="localEpisode.url" target="_blank">{{ localEpisode.name }}</a>
            </p>
  
            <p class="mt-1 text-gray-700 dark:text-gray-300">
                <!-- TODO: Add this field in each detail page -->
              <span class="font-semibold">Creation Date:</span>
              {{ localEpisode.created | date}}
            </p>
          </div>
        </div>
  
        <hr class="border-gray-200 dark:border-gray-700" />

        @if(charactersLength > 0){
          <div class="p-6">
            <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">
              Characters in episode
            </h2>
            <ul class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3">
              @for (character of localEpisode.characters; track character) {
                <li class="p-2 text-sm text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition">
                  <!-- TODO: Create a pipe or an attribute directive to transform the url to hide the https://rickandmortyapi.com/api and show only the text episode/EpisodeNumber -->
                    <a [routerLink]="[character | hideurl]">{{ character | hideurl }}</a> 
                </li>
              }
            </ul>
          </div>
         }
      </div>
    </div>
  </app-container>
}